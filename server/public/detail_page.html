<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8"/>
        <title>0Uni 마켓</title>
        <link rel="stylesheet" type="text/css" href="css/mainstyle.css">
        <link rel="stylesheet" type="text/css" href="css/product.css">
        <link rel="stylesheet" type="text/css" href="css/detail.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="js/index.js"></script>
        <script src="js/connectByKeyword.js"></script>
    </head>
    <script type="text/javascript">
        function change() {
            var keyword = document.getElementById("search").value;
            var target = document.getElementById("filter");
            var category = target.options[target.selectedIndex].value;

            if (keyword == "") {
                alert("Enter keyword first.");
                location.href="index.html"; 
            } else {
                if (category == "default") {

                    
                } else {

                }
                // DB 작업
                location.href="searchResult.html";    
            }                
        };

        $(document).ready(() => {
            $("button").click(function () {
                if ($(this).html() == "♡") $(this).html("❤");
                else $(this).html("♡");
            });
        });

        $(document).ready(function(){
            $('ul.tabs li').click(function(){
                var tab_id = $(this).attr('data');

                $('ul.tabs li').removeClass('current');
                $('.tab-content').removeClass('current');

                $(this).addClass('current');
                $("#"+tab_id).addClass('current');
            })
        })

        function submitInquire() {
            const newInquire = document.getElementById("new_inquire").value.trim();
            
            if (newInquire) {
                const dateEL = document.createElement('div');
                dateEL.classList.add("inquire_date");
                const dateString = (new Date()).toISOString();
                dateEL.innerText = dateString.substring(0, 10) + " " + dateString.substring(11, 19);

                const contentEL = document.createElement('div');
                contentEL.classList.add("inquire_content");
                contentEL.innerText = newInquire;

                const inquireEL = document.createElement('div');
                inquireEL.classList.add("inquire_row");
                inquireEL.appendChild(dateEL);
                inquireEL.appendChild(contentEL);

                document.getElementById("inquire").appendChild(inquireEL);
                document.getElementById("new_inquire").value = ""

                const countEL = document.getElementById("inquire_num");
                countEL.innerText = parseInt(countEL.innerText) + 1;
            }
        }
    </script>
    <body>
        <header> <!--헤더-->
            <div id="title">
                <div class="logo"><a href="index.html"><img src="image/logo.png" alt="로고 이미지" width=300 height="86px"></a></div>
                <div class="searchbox">
                    <table class="searchbox_content">
                        <tr>
                            <td style="width: 70%;">
                                <input type="text" id="search" name="search" placeholder="입력하세요" style="width: 95%;"
                                    onKeypress="javascript:if(event.keyCode==13) {change()}" />
                            </td>
                            <td style="width: 17%;">
                                <form name="selection">
                                    <p>
                                        <select id="filter" size="1">
                                            <option value="default" selected>필터</option>
                                            <option value="university">대학</option>
                                            <option value="distance">거리순</option>
                                        </select>
                                    </p>
                                </form>
                            </td>
                            <td style="width: 13%;"><input type="button" onclick="change()" value="Search"></td>
                        </tr>
                    </table>
                </div>
                <div class="information">
                    <ul>
                        <li><a href="myPage.html">My page</a></li>
                        <li><a href="write.html">글쓰기</a></li>
                        <li><a href="index.html">Home</a></li>
                    </ul>
                </div>
            </div>
        </header>
        <nav> <!--메뉴바-->
        <div id="menubar">
            <ul>
                <li>
                    <a class="menu sharemenu" href="searchResult.html?name=default">대여</a>
                    <div id="semimenu-share">
                        <div><a href="searchResult.html?name=book">책</a></div>
                        <div><a href="searchResult.html?name=homeAppliance">가전</a></div>
                        <div><a href="searchResult.html?name=pen">완구</a></div>
                    </div>
                </li>
                <li>
                    <a class="menu buymenu" href="searchResult.html?name=default">공구</a>
                </li>
                <li><a class="menu carpoolmenu" href="carPool.html?name=default">카풀</a>
                    <div id="semimenu-carpool">
                        <div><a href="carPool.html?name=ownCar">자차</a></div>
                        <div><a href="carPool.html?name=taxi">택시</a></div>
                    </div>
                </li>
                <li><a class="menu sellmenu" href="searchResult.html">판매</a></li>
                <li><a class="menu" href="aboutus.html">About us</a></li>
            </ul>
        </div>
        </nav>
        <article id="briefly">
            <table id="brief_table">
                <tr>
                    <td style="width: 50%;">
                        <!--  vertical-align: top;" -->
                        <div>
                            <img src="image/post_It.jpg" width="100%" height="100%"/>
                        </div>
                    </td>
                    <td style="width: 50%; padding-left: 20px;">
                        <!--  -->
                        <div class="detail_"><b>포스트잇 90장</b></div>
                        <div class="detail_"><b>1,000원</b></div>
                        <div>
                            <table style="margin-top: 20px;">
                                <tr>
                                    <td class="cols"> * 상품 상태&nbsp&nbsp&nbsp </td>
                                    <td> 약간의 사용감 </td>
                                </tr>
                                <tr>
                                    <td class="cols"> * 거래 방법 </td>
                                    <td> 택배 </td>
                                </tr>
                                <tr class="cols">
                                    <td class="cols"> * 거래 지역 </td>
                                    <td> 관악구 </td>
                                </tr>
                            </table>
                        </div> <br>
                        <div>
                            <input class="buts" type="button" onClick="reviewSubmit(this.form)" value="바로 대여">
                            <input class="buts" type="button" onclick="alert('010-1234-1234')" value="연락하기">
                            <button class="buts" type="button" onClick="reviewSubmit(this.form)">♡</button>
                        </div>
                    </td>
                </tr>
            </table>
        </article>
        <br><hr>
        <article class="details" style="margin-top: 20px;">
            <ul class="tabs">
                <li class="tab-link current" data="info">상세 정보</li>
                <li class="tab-link" data="inquire">상품 문의</li>
            </ul>
            <div id="info" class="tab-content current">
                <p>형광색이에요.<br>
                    글씨도 잘 써지고 좋네요.
                </p>
                <table style="margin-top: 20px;">
                    <tr>
                        <th>대여 기간</th>
                    </tr>
                    <tr>
                        <td>1주일</td>
                    </tr>
                </table>
            </div>
            <div id="inquire" class="tab-content">
                <div class="tab-link current">
                    상품 문의 <span id="inquire_num">2</span>
                </div>
                <div class="inquire_input">
                    <textarea id="new_inquire" name="new_inquire" row=5 cols=40
                    placeholder="상품에 대한 문의를 입력해주세요."></textarea>
                    <input type="submit" onClick="submitInquire()">
                </div>
                <div class="inquire_row">
                    <div class="inquire_date">2021-11-06 15:32:23</div>
                    <div class="inquire_content">너무 좋아요.</div>
                </div>
                <div class="inquire_row">
                    <div class="inquire_date">2021-11-05 12:19:41</div>
                    <div class="inquire_content">유용해요.</div>
                </div>
            </div>
        </article>
    </body>
</html>